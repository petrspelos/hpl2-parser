void OnStart()
{
	SetPlayerMoveSpeedMul(0.75f);
	AddEntityCollideCallback("Player", "AreaNotSafe", "EvenNotsafe", false, 1);
	AddEntityCollideCallback("Player", "AreaLobbyEnter", "EvenSafe", false, 1);
	AddEntityCollideCallback("Player", "Area3199Event", "Even3199PL", true, 1);
	AddEntityCollideCallback("Player", "AreaSuicideMother", "SuicideMotherScare", true, 1);
	AddEntityCollideCallback("Player", "Areafurnituremove_1", "Furniture_move_1", true, 1);
	AddEntityCollideCallback("hunter_silent_1", "Area3199Gone", "Even3199Gone", true, 1);
	AddEntityCollideCallback("hunter_silent_1", "AreaCarLightsOff", "CarLightsOffScare", true, 1);
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_7", "EvenMindFuckScream_1", true, 1);
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_4", "EvenMindFuckKnock_2", true, 1);
	AddEntityCollideCallback("Player", "AreaDirtyRoom_LightsOutDog", "EvenDogScare_LightsOut_1", true, 1);
	AddEntityCollideCallback("Player", "AreaDirtyRoom", "EvenChangeMusic", true, 1);
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_9", "MindFuck1", true, 1);
	AddEntityCollideCallback("Player", "AreaBasementFog", "BasementFog", false, 1);
	AddEntityCollideCallback("Player", "AreaDoorKnockHint_1", "PuzzleHint_1", true, 1);
	AddEntityCollideCallback("Player", "AreaDogBark_1", "DogBark_1", true, 1);
	AddEntityCollideCallback("Player", "AreaDogEncounter3", "DogSpawnScndFloor", true, 1);
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_1", "MindFuckBagsActive", true, 1);
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_8", "DogSpook3rdFloor", true, 1);
	AddEntityCollideCallback("nec_dog_2", "AreaDogSpookFenceGone", "Dog3rdFloorGone", true, 1);
	AddEntityCollideCallback("Player", "AreaTimer087", "B87BEvent", true, 1);
	AddEntityCollideCallback("Player", "AreaDogEncounter1", "DogBoss_1", true, 1);
	AddEntityCollideCallback("crawler_1", "AreaCrawlerGone", "CrawlerGone_1", true, 1);
	AddEntityCollideCallback("tech_lever_1", "AreaBossLever_1", "BossLever_1", true, 1);
	AddEntityCollideCallback("tech_lever_2", "AreaBossLever_2", "BossLever_2", true, 1);
	AddEntityCollideCallback("tech_lever_3", "AreaBossLever_3", "BossLever_3", true, 1);
	AddEntityCollideCallback("Player", "AreaDollDoorSound", "DollDoorSound", true, 1);
	AddEntityCollideCallback("necr_spider_1", "AreaSpiderGone", "SpiderGone", true, 1);
	AddEntityCollideCallback("necr_spider_1", "AreaSpiderGone", "SpiderGone", true, 1);
	AddEntityCollideCallback("Player", "AreaShowHint", "ShowHint_1", true, 1);	
	AddEntityCollideCallback("Player", "AreaSortOfSafe", "SortOfSafe", false, 1);	
	AddEntityCollideCallback("Player", "AreaSpookySound", "SpookySound", true, 1);
	AddEntityCollideCallback("Player", "AreaComp3rdFloor", "Comp3rdFloorQst", true, 1);	
	AddEntityCollideCallback("Player", "AreaDoorScream", "DoorScreamEven", true, 1);
	AddEntityCollideCallback("Player", "AreaActSoundFonm", "EvenSoundFonm", true, 1);	
	AddEntityCollideCallback("Player", "AreaObjChange1", "EvenChangeObj_1", true, 1);	
	AddEntityCollideCallback("Player", "AreaObjChange2", "EvenChangeObj_2", true, 1);	
	SetEntityPlayerInteractCallback("Flashlight_lantern_dkf_1", "UnlockElevator1", true);
	SetEntityPlayerInteractCallback("ExamineArea_4", "WindowScare1", true);
	SetEntityPlayerInteractCallback("item_key01_1", "B_309DogBark_1", true);
	AddUseItemCallback("", "KeyPart_2", "Key_Machine_Int", "KeyMachine_Int_2", true);
	AddUseItemCallback("", "KeyPart_1", "Key_Machine_Int", "KeyMachine_Int_1", true);
	AddUseItemCallback("", "item_key01_burn_1", "AreaDoorLocked_1", "UnlockStorage", true);
	AddUseItemCallback("", "StrangeKey", "AreaDoor_42", "UnlockThankYouRoom", true);
	AddUseItemCallback("", "Key_BaseDoor", "Floor_B_Door_Locked", "UnlockBasement", true);
	AddUseItemCallback("", "Key_BaseDoor", "Floor_B_Door_Locked_1", "UnlockBasement", true);
	AddUseItemCallback("", "item_chemjar_acid_1", "Area_Acid_Skrew", "ToolBoxOpen_1", true);
	AddUseItemCallback("", "item_screwdriver_1", "Area_Acid_Skrew", "ToolBoxOpen_2", true);
	AddUseItemCallback("", "item_secret_mine_door_key_1", "AreaDoor_En_Locked_1", "Unlock306", true);
	AddUseItemCallback("", "item_fueltank_item_1", "AreaGasBlob", "PoorGasOnBlob", true);
	AddUseItemCallback("", "item_lighter_1", "AreaLightBlob_1", "LightBlobOnFire", true);
	AddUseItemCallback("", "item_key01_1", "AreaDoor_En_Locked", "Unlock309", true);
	AddUseItemCallback("", "item_key01_burn_3", "furniture_small_locker_12", "UnlockLocker", true);
	AddUseItemCallback("", "item_key01_2", "AreaDoor_9", "Unlock201", true);
	AddUseItemCallback("", "crowbar_2", "Floor_2_Door_7", "UseBoltCutters1", true);
	AddUseItemCallback("", "crowbar_2", "Floor_2_Door_6", "UseBoltCutters2", true);
	AddUseItemCallback("", "item_key01_2", "AreaDoor_9", "Unlock201", true);
	AddUseItemCallback("", "item_key01_burn_2", "Floor_B_Door_6", "UnlockParkingLot", true);
	AddUseItemCallback("", "item_replacement_fuse_2", "AreaPlaceFuse", "PlaceFuse_1", false);
	AddUseItemCallback("", "item_replacement_fuse_1", "AreaPlaceFuse", "PlaceFuse_2", false);
	AddUseItemCallback("", "Fuse3", "AreaPlaceFuse", "PlaceFuse_3", false);
	AddUseItemCallback("", "item_key_bossfight", "AreaDoorLocked_8", "UnlockBossBattleKey", true);
	AddUseItemCallback("", "crowbar_2", "AreaDoor_19", "EvenNoWay", true);
	AddUseItemCallback("", "item_secret_mine_door_key_2", "chest_small_1", "EvenUnlockChest", true);
	SetEntityCallbackFunc("kitchen_cup_6", "break_trigger");
	AddTimer("TimerEIntro", 5.0f, "TimerEIntro");
	AddTimer("TimerSuicideVictim", 17.0f, "TimerSuicideVictim");
	StartPlayerLookAt("IntroLook_6",0.5f, 0.5f, "");
	FadeOut(0.0f);
	SetPlayerCrouching(true);
	SetPlayerActive(false);
	GiveItem("item_radio", "Puzzle", "RadioItem", "inventory_comradio.tga", 0);
	SetSanityDrainDisabled(true);
	SetLightVisible("PointLight_48", false);
	SetLightVisible("PointLight_77", false);
	SetLightVisible("PointLight_25", false);
	SetLightFlickerActive("PointLight_3", false);
	SetPlayerLampOil(0);
	SetFogActive(true);
	FadeImageTrailTo(1.0, 0.5);
	GiveSanityBoost();
	SetLightVisible("PointLight_10", false);
	SetLightVisible("PointLight_69", false);
	SetLightVisible("PointLight_70", false);
	SetLightVisible("PointLight_71", false);
	SetSwingDoorLocked("chest_small_1", true, false);
	SetSwingDoorLocked("chest_small_2", true, false);
}

void OnEnter()
{
	PlaySoundAtEntity("", "amb_mansion_small_hallway.snt", "Player", 0.2, true);
	AddTimer("TimerBreath", 10.0f, "TimerBreath");
	AddTimer("TimerExplosion", 120.0f, "TimerExplosion");
	AddTimer("TimerWindowHowl", 8.0f, "TimerWindowHowl");
	SetSanityDrainDisabled(true);
	SetPlayerMoveSpeedMul(0.70f);
	AddEntityCollideCallback("Player", "AreaNotSafe", "EvenNotsafe", false, 1);
	AddEntityCollideCallback("Player", "AreaLobbyEnter", "EvenSafe", false, 1);
	AddEntityCollideCallback("Player", "AreaSortOfSafe_1", "SortOfNotSafe", false, 1);
	AddEntityCollideCallback("Player", "AreaSortOfSafe_2", "SortOfNotSafe", false, 1);
}

void OnLeave()
{
	StopMusic(0.5, 0);
}

//////////////////////////////////////////////////////////

void B87BEvent(string &in asParent, string &in asChild, int alState)
{
	AddTimer("Timer0781", 10.0f, "Timer0781");
	PlayMusic("087-B.ogg", true, 3.5f, 0, 87, false);
}

void Timer0781(string &in asTimer)
{
	TeleportPlayer("PlayerStartArea_24");
	StopMusic(2.5, 87);
	PlayMusic("The Apartments Tension.ogg", true, 1.0, 1, 0, false);
	GiveSanityDamage(0, true);
}

//////////////////////////////////////////////////////////

void TimerExplosion(string &in asTimer)
{
	PlaySoundAtEntity("", "distantexplosion.snt", "Player", 0, true);
	StartScreenShake(0.02, 1.0, 0.5, 10.0);
	AddTimer("TimerExplosion", 120.5f, "TimerExplosion");
}

//////////////////////////////////////////////////////////

void TimerBreath(string &in asTimer)
{
	AddTimer("TimerBreath", 10.0f, "TimerBreath");
	PlaySoundAtEntity("", "react_breath_slow.snt", "Player", 0, true);
}

//////////////////////////////////////////////////////////

void TimerEIntro(string &in asTimer)
{
	StartPlayerLookAt("IntroLook_1",0.5f, 0.5f, "");
	FadeIn(4.0f);
	PlaySoundAtEntity("sigh", "react_sigh.snt", "Player", 1.0 / 2, false);
	FadePlayerRollTo(65, 1, 1); 
	AddTimer("TimerEIntro1", 5.0f, "TimerEIntro1");
}

void TimerEIntro1(string &in asTimer)
{
	StartPlayerLookAt("IntroLook_2", 0.4f, 0.4f, "");
	FadePlayerRollTo(12, 0.4f, 0.5f); 
	AddTimer("TimerEIntro2", 4.5f, "TimerEIntro2");
}

void TimerEIntro2(string &in asTimer)
{
	StartPlayerLookAt("IntroLook_3", 0.9f, 1.1f, "");
	AddTimer("TimerEIntroDoor", 2.0f, "TimerEIntroDoor");
	FadePlayerRollTo(45, 1, 2); 
	AddTimer("TimerEIntro3", 4.5f, "TimerEIntro3");
	SetEntityActive("base_entrance_man_3", false);
}

void TimerEIntro3(string &in asTimer)
{
	StartPlayerLookAt("IntroLook_4", 0.9f, 1.0f, "");
	FadePlayerRollTo(12, 0.4f, 0.5f); 
	AddTimer("TimerEIntro4", 4.5f, "TimerEIntro4");
	AddTimer("TimerEIntro4B", 4.0f, "TimerEIntro4B");
	AddTimer("TimerEIntro4C", 9.0, "TimerEIntro4C");
}

void TimerEIntro4(string &in asTimer)
{
	StartPlayerLookAt("item_comradio_1", 1.0f, 1.0f, "");
	AddTimer("TimerEIntro5", 5.5f, "TimerEIntro5");
}
void TimerEIntro4B(string &in asTimer)
{
	PlaySoundAtEntity("", "item_radio_noise.snt", "item_comradio_1", 1.0, false);
}
void TimerEIntro4C(string &in asTimer)
{
	PlaySoundAtEntity("", "pick_generic.snt", "Player", 0, false);
	SetEntityActive("item_comradio_1", false);
	SetMessage("Messages", "Radio", 3.5);
}

void TimerEIntro5(string &in asTimer)
{
	SetPlayerActive(true);
	StartPlayerLookAt("IntroLook_5", 5, 6, "");
	AddTimer("TimerEIntro6", 0.5f, "TimerEIntro6");
	SetPlayerCrouching(false);
}

void TimerEIntro6(string &in asTimer)
{
	StartPlayerLookAt("IntroLook_2", 5, 6, "");
	FadePlayerRollTo(0, 10, 60); 
	MovePlayerHeadPos(0, 0, 0, 1, 0.5f);
	AddTimer("TimerEIntro7", 1.0f, "TimerEIntro7");
}

void TimerEIntro7(string &in asTimer)
{
	FadeImageTrailTo(0,1);
	StopPlayerLookAt();
	SetEntityActive("ExamineArea_1", true);
	FadeImageTrailTo(0.0, 0.1);
	SetEntityActive("ExamineArea_146", true);
	AddEffectVoice("thirdfloor", "", "Voice", "3rdF", false, "Player", 5, 10);
	AddTimer("TimerEIntro8", 2.0f, "TimerEIntro8");
}

void TimerEIntro8(string &in asTimer)
{
	AddQuest("Find Crew", "Ch1Pt1Qst");
	AddNote("Diary1", "default_note");
}

//////////////////////////////////////////////////////////

void EvenNotsafe(string &in asParent, string &in asChild, int alState)
{
	PlayMusic("The Apartments Tension.ogg", true, 3.5f, 1, 0, false);
	AddEntityCollideCallback("Player", "AreaLobbyEnter", "EvenSafe", true, 1);
	SetFogProperties(3, 6, 1, true);
	SetInsanitySetEnabled("Apartments", true);
	SetEntityActive("nec_dog_3", false);
	SetEntityActive("nec_dog_5", false);
	SetInDarknessEffectsActive(true);
	SetSanityDrainDisabled(true);
}

//////////////////////////////////////////////////////////

void TimerAmbient_1(string &in asTimer)
{
	PlaySoundAtEntity("", "Apartment_Ambience.snt", "Player", 1.0, false);
	AddTimer("asTimer", 45.0f, "TimerAmbient_1");
}

void TimerAmbient_Baby(string &in asTimer)
{
	PlaySoundAtEntity("", "babycryinroom.snt", "AreaBabyCry", 0.5, false);
	AddTimer("asTimer", 100.0f, "TimerAmbient_Baby");
}

void EvenSafe(string &in asParent, string &in asChild, int alState)
{
	StopMusic(2.5, 0);
	SetFogProperties(10, 25, 1, true);
	AddEntityCollideCallback("Player", "AreaNotSafe", "EvenNotsafe", false, 1);
	PlayMusic("Safe At Last.ogg", true, 3.0f, 1, 2, false);
	SetInsanitySetEnabled("Apartments", false);
	SetInDarknessEffectsActive(false);
	SetSanityDrainDisabled(true);
}

void BasementFog(string &in asParent, string &in asChild, int alState)
{
	StopMusic(2.5, 2);
	SetFogProperties(3, 6, 1, true);
	AddTimer("TimerAmbience_1", 60.0f, "TimerAmbience_1");
	AddTimer("TimerAmbience_2", 180.0f, "TimerAmbience_2");
	AddTimer("TimerCommotion", 300.0f, "TimerCommotion");
	AddTimer("TimerAmbienceGeneral", 420.0f, "TimerAmbienceGeneral");
	SetInDarknessEffectsActive(true);
	InsanityEventIsActive();
	SetSanityDrainDisabled(true);
}

//////////////////////////////////////////////////////////

void Checkpoint_1(string &in asEntity)
{
	CheckPoint ("", "Checkpoint_1stFloor", "EvenSafe", "Hints", "DefaultDeath");
	StartEffectFlash(0.01, 1.0, 1.5);
	AddTimer("TimerSaveMessage", 1.5f, "TimerSaveMessage");
	PlaySoundAtEntity("", "Save1.snt", "Player", 0.5, true);
	AutoSave();
	SetSanityDrainDisabled(true);
}

void TimerSaveMessage(string &in asTimer)
{
	SetMessage("Messages", "Save1", 4.0);
	SetSanityDrainDisabled(true);
}

//////////////////////////////////////////////////////////

void Checkpoint_3(string &in asEntity)
{
	CheckPoint ("", "exit_checkpoint_save", "", "Hints", "DefaultDeath");
	StartEffectFlash(0.01, 1.0, 1.5);
	AddTimer("TimerSaveMessage", 1.5f, "TimerSaveMessage");
	PlaySoundAtEntity("", "Save1.snt", "Player", 0.5, true);
	AutoSave();
	SetSanityDrainDisabled(true);
}

//////////////////////////////////////////////////////////

void Elevator_1(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound", 1.2f, "TimerElevatorDoorSound");
	StopMusic(1.5, 2);
	SetPlayerActive(false);
	SetSanityDrainDisabled(true);
}
void TimerElevatorDoorSound(string &in asTimer)
{
	FadeIn(1.0f);
	TeleportPlayer("PlayerStartArea_2");
	SetPlayerActive(true);
	SetSanityDrainDisabled(true);
}
void Elevator_2(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound", 1.2f, "TimerElevatorDoorSound");
	SetPlayerActive(false);
	SetSanityDrainDisabled(true);
}

void Elevator_3(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound", 1.2f, "TimerElevatorDoorSound");
	SetPlayerActive(false);
	SetSanityDrainDisabled(true);
}

void Elevator_B(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound", 1.2f, "TimerElevatorDoorSound");
	SetPlayerActive(false);
	SetSanityDrainDisabled(true);
}

void ElevatorMain(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound_1", 1.2f, "TimerElevatorDoorSound_1");
	SetPlayerActive(false);
	SetSanityDrainDisabled(true);
}
void TimerElevatorDoorSound_1(string &in asTimer)
{
	FadeIn(1.0f);
	TeleportPlayer("PlayerStartArea_3");
	SetPlayerActive(true);
}

void ElevatorMain_1(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound_2", 1.2f, "TimerElevatorDoorSound_2");
	SetPlayerActive(false);
}
void TimerElevatorDoorSound_2(string &in asTimer)
{
	FadeIn(1.0f);
	TeleportPlayer("PlayerStartArea_4");
	SetPlayerActive(true);
}

void ElevatorMain_2(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound_3", 1.2f, "TimerElevatorDoorSound_3");
	SetPlayerActive(false);
}
void TimerElevatorDoorSound_3(string &in asTimer)
{
	FadeIn(1.0f);
	TeleportPlayer("PlayerStartArea_5");
	SetPlayerActive(true);
}

void ElevatorMain_3(string &in asEntity)
{
	FadeOut(0.0f);
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	AddTimer("TimerElevatorDoorSound_4", 1.2f, "TimerElevatorDoorSound_4");
	SetPlayerActive(false);
}
void TimerElevatorDoorSound_4(string &in asTimer)
{
	FadeIn(1.0f);
	TeleportPlayer("PlayerStartArea_6");
	SetPlayerActive(true);
}

void ButtonFstFloor(string &in asEntity)
{
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
	AddTimer("TimerFirstFloor", 10.5f, "TimerFirstFloor");
	AddTimer("TimerElevatorShake", 1.5f, "TimerElevatorShake");
	SetEntityActive("AreaButton_3", false);
	SetEntityActive("AreaButton_2", false);
	SetEntityActive("AreaButton_0", false);
	SetEntityActive("AreaButton_1", false);
	SetEntityActive("AreaElevatorDoorScdFloor", false);
	SetEntityActive("AreaElevatorDoorTrdFloor", false);
	SetEntityActive("AreaElevatorDoorBasement", false);
}
void TimerFirstFloor(string &in asTimer)
{
	SetEntityActive("AreaElevatorDoorFstFloor", true);
	SetLightFlickerActive("PointLight_3", false);
	FadeLightTo("PointLight_3", 0.4, 0.6, 0.5, 1.0, 3.5, 0.01);
	SetEntityActive("AreaButton_3", true);
	SetEntityActive("AreaButton_2", true);
	SetEntityActive("AreaButton_0", true);
	SetEntityActive("AreaButton_1", false);
}

void TimerElevatorShake(string &in asTimer)
{
	StartScreenShake(0.01, 8.0, 0.5, 0.5);
	PlaySoundAtEntity("", "Elevator.snt", "Player", 1.0 / 2, false);
	SetLightFlickerActive("PointLight_3", true);
}

void ButtonScdFloor(string &in asEntity)
{
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
	AddTimer("TimerSecondFloor", 10.5f, "TimerSecondFloor");
	AddTimer("TimerElevatorShake", 1.5f, "TimerElevatorShake");
	SetEntityActive("AreaButton_2", false);
	SetEntityActive("AreaButton_1", false);
	SetEntityActive("AreaButton_3", false);
	SetEntityActive("AreaButton_0", false);
	SetEntityActive("AreaElevatorDoorFstFloor", false);
	SetEntityActive("AreaElevatorDoorTrdFloor", false);
	SetEntityActive("AreaElevatorDoorBasement", false);
}
void TimerSecondFloor(string &in asTimer)
{
	SetEntityActive("AreaElevatorDoorScdFloor", true);
	SetLightFlickerActive("PointLight_3", false);
	FadeLightTo("PointLight_3", 0.4, 0.6, 0.5, 1.0, 3.5, 0.01);
	SetEntityActive("AreaButton_3", true);
	SetEntityActive("AreaButton_2", false);
	SetEntityActive("AreaButton_0", true);
	SetEntityActive("AreaButton_1", true);
}

void ButtonThrdFloor(string &in asEntity)
{
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
	AddTimer("TimerThirdFloor", 10.5f, "TimerThirdFloor");
	AddTimer("TimerElevatorShake", 1.5f, "TimerElevatorShake");
	SetEntityActive("AreaButton_3", false);
	SetEntityActive("AreaButton_2", false);
	SetEntityActive("AreaButton_1", false);
	SetEntityActive("AreaButton_0", false);
	SetEntityActive("AreaElevatorDoorFstFloor", false);
	SetEntityActive("AreaElevatorDoorScdFloor", false);
	SetEntityActive("AreaElevatorDoorBasement", false);
}
void TimerThirdFloor(string &in asTimer)
{
	SetEntityActive("AreaElevatorDoorTrdFloor", true);
	SetLightFlickerActive("PointLight_3", false);
	FadeLightTo("PointLight_3", 0.4, 0.6, 0.5, 1.0, 3.5, 0.01);
	SetEntityActive("AreaButton_3", false);
	SetEntityActive("AreaButton_2", true);
	SetEntityActive("AreaButton_0", true);
	SetEntityActive("AreaButton_1", true);
}

void ButtonBasement(string &in asEntity)
{
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
	AddTimer("TimerBasement", 10.5f, "TimerBasement");
	AddTimer("TimerElevatorShake", 1.5f, "TimerElevatorShake");
	SetEntityActive("AreaButton_3", false);
	SetEntityActive("AreaButton_2", false);
	SetEntityActive("AreaButton_1", false);
	SetEntityActive("AreaButton_0", false);
	SetEntityActive("AreaElevatorDoorFstFloor", false);
	SetEntityActive("AreaElevatorDoorScdFloor", false);
	SetEntityActive("AreaElevatorDoorTrdFloor", false);
	
}
void TimerBasement(string &in asTimer)
{
	SetEntityActive("AreaElevatorDoorBasement", true);
	SetLightFlickerActive("PointLight_3", false);
	FadeLightTo("PointLight_3", 0.4, 0.6, 0.5, 1.0, 3.5, 0.01);
	SetEntityActive("AreaButton_3", true);
	SetEntityActive("AreaButton_2", true);
	SetEntityActive("AreaButton_0", false);
	SetEntityActive("AreaButton_1", true);
}

//////////////////////////////////////////////////////////

void KCS_Sound(string &in asEntity)
{
	PlaySoundAtEntity("", "KCS5yeah.snt", "Area_KCS_Sound", 0.0, false);
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
}

//////////////////////////////////////////////////////////

void TimerFadeInDoor(string &in asTimer)
{
	FadeIn(1.0);
	SetPlayerActive(true);
}

void Door_L_1(string &in asEntity)
{
	SetMessage("Doors", "DoorLocked1", 3.5);
}

void Door_Fst_Floor(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartDoor_4");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_Lobby(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartDoor_1");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_BabyCry(string &in asEntity)
{
	PlaySoundAtEntity("", "lockedchaindoor.snt", "Player", 0.0, false);
	AddTimer("TimerBabyCry", 2.0f, "TimerBabyCry");
	SetMessage("Doors", "DoorLocked4", 5.5);
}

void TimerBabyCry(string &in asTimer)
{
	PlaySoundAtEntity("", "babycryinroom.snt", "AreaDoor_19", 0.0, false);
}

void Door_L(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked2", 3.5);
}

void Door_L2(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked1", 3.5);
}

void Door_L3(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked3", 3.5);
}

void Door_L4(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked4", 3.5);
}

void Door_L5(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked5", 3.5);
}

void Door_L6(string &in asEntity)
{
	PlaySoundAtEntity("", "interact_door_knob1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorLocked6", 3.5);
}

void Elevator_L(string &in asEntity)
{
	SetMessage("Doors", "DoorLockedElevator", 3.5);
}

void Basement_Floor_PL(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_37");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetFogProperties(50, 100, 1, true);
	SetPlayerActive(false);
}

void Basement_Floor_PL_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_38");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetFogProperties(3, 6, 1, true);
	StopMusic(0.5, 45);
	SetPlayerActive(false);
}

void Door_2(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_17");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_2_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_16");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_3(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_20");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_3_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_22");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_4(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_21");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_4_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_18");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopSound("KnockKnock", 0.5);
	SetPlayerActive(false);
}

void Door_6(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_26");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_6_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_25");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_7(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_33");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_7_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_31");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_8(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_28");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_8_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_29");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_9(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_35");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_9_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_30");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	PlayMusic("The Apartments Tension.ogg", true, 1.0, 1, 0, false);
	SetPlayerActive(false);
}

void DoorFstFloor_2(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartDoor_1");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void DoorCloset_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartDoor_2");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void DoorCloset_1B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartDoor_5");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void DoorRoom206(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_48");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void DoorRoom206_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_49");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void SetExamineActive(string &in asEntity)
{
	SetEntityActive("ExamineArea_143", true);
	SetEntityActive("ExamineArea_142", true);
}

//////////////////////////////////////////////////////////

void First_Floor(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_8");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void First_Floor_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_11");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void First_Floor_E(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_7");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void First_Floor_E_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_13");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Second_Floor(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_10");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Second_Floor_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_12");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Second_Floor_E(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_9");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Second_Floor_E_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_14");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Basement_Floor(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_15");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void Basement_Floor_E(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_36");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Dog_Floor(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_44");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void Dog_Floor_E(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_43");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void TimerSuicideVictim(string &in asTimer)
{
	PlaySoundAtEntity("SuicideVic1", "Suicide1.snt", "SuicideSounds", 0.0, false);
	AddTimer("asTimer", 17.0f, "TimerSuicideVictim");
}

void SuicideInteract(string &in asEntity)
{
	PlaySoundAtEntity("", "Suicide2.snt", "SuicideSounds", 0.0, false);
	PlaySoundAtEntity("", "knack_window2.snt", "Player", 0.0, false);
	StopSound("SuicideVic1", 0.01);
	RemoveTimer("TimerSuicideVictim");
	RemoveTimer("asTimer");
	AddTimer("TimerSuicideLight", 4.030f, "TimerSuicideLight");
	SetEntityActive("kitchen_cup_6", false);
}

void TimerSuicideLight(string &in asTimer)
{
	FadeLightTo("PointLight_42", 1, 0.8, 0.2, 1, 3, 0.05);
	AddTimer("TimerSuicideLight_1", 0.15f, "TimerSuicideLight_1");
}

void TimerSuicideLight_1(string &in asTimer)
{
	FadeLightTo("PointLight_42", 0, 0, 0, 1, 3, 0.05);
}

//////////////////////////////////////////////////////////

void Even3199PL(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("hunter_silent_1", true);
	AddEnemyPatrolNode("hunter_silent_1", "PathNodeArea3199_1", 0.01, "");
	AddEnemyPatrolNode("hunter_silent_1", "PathNodeArea3199_4", 0.01, "");
	AddTimer("TimerSCPSting_1", 0.7f, "TimerSCPSting_1");
	AddTimer("TimerDoor3199", 2.5f, "TimerDoor3199");
	AddTimer("TimerFeet3199", 0.8f, "TimerFeet3199");
	SetPlayerMoveSpeedMul(0.50f);
}

void Even3199Gone(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("hunter_silent_1", false);
}

void TimerSCPSting_1(string &in asTimer)
{
	PlaySoundAtEntity("", "classic_SCP_sting_1.snt", "Player", 0.0, false);
}

void TimerFeet3199(string &in asTimer)
{
	PlaySoundAtEntity("", "3199_footsteps.snt", "hunter_silent_1", 0.0, false);
}

void TimerDoor3199(string &in asTimer)
{
	PlaySoundAtEntity("", "3199_door.snt", "Area3199Gone", 0.0, false);
	SetPlayerMoveSpeedMul(0.75f);
}

//////////////////////////////////////////////////////////

void DollDoorSound(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "doll_door_sound_1.snt", "DollDoor", 0.0, false);
}

//////////////////////////////////////////////////////////

void SuicideMotherScare(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "mom_brutal_suicide.snt", "AreaSuicideMom_Sound", 0.0, false);
	AddTimer("TimerUnlock_1", 15.0f, "TimerUnlock_1");
	SetEntityActive("AreaDoor_33", false);
	SetEntityActive("AreaDoor_L_K_1", true);
}

void TimerUnlock_1(string &in asTimer)
{
	SetEntityActive("AreaDoor_33", true);
	SetEntityActive("AreaDoor_L_K_1", false);
}

//////////////////////////////////////////////////////////

void Furniture_move_1(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("furniture_woodchair_SN_1", false);
	SetEntityActive("furniture_woodchair_SN_2", true);
	SetEntityActive("ExamineArea_139", false);
	SetEntityActive("ExamineArea_138", false);
	SetEntityActive("ExamineArea_151", true);
	SetEntityActive("ExamineArea_150", true);
	PlaySoundAtEntity("", "funiture_move_1.snt", "furniture_woodchair_SN_2", 0.0, false);
	AddEntityCollideCallback("Player", "Areafurnituremove_2", "Furniture_move_2", true, 1);
}

void Furniture_move_2(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "fonm_1.snt", "AreaWindowBang", 0.0, false);
	AddTimer("TimerSanityWindow", 0.5f, "TimerSanityWindow");
}

void TimerSanityWindow(string &in asTimer)
{
	GiveSanityDamage(5, true);
}

//////////////////////////////////////////////////////////

void KeyMachine_Int_1(string &in asItem, string &in asEntity)
{
	SetLocalVarInt("KeyPlacedInMachine_1", 1);

	PlaySoundAtEntity("", "insert_key.snt", "Player", 0, false);
	RemoveItem(asItem);
	
	SetMessage("Messages", "KeyInsert", 3.5);
	
	if(GetLocalVarInt("KeyPlacedInMachine_1")==1 && GetLocalVarInt("KeyPlacedInMachine_2")==1){
	AddTimer("MachineActive", 0.01f, "MachineActive");
		}
}

void KeyMachine_Int_2(string &in asItem, string &in asEntity)
{
	SetLocalVarInt("KeyPlacedInMachine_2", 1);

	PlaySoundAtEntity("", "insert_key.snt", "Player", 0, false);
	RemoveItem(asItem);
	
	SetMessage("Messages", "KeyInsert", 3.5);
	
	if(GetLocalVarInt("KeyPlacedInMachine_1")==1 && GetLocalVarInt("KeyPlacedInMachine_2")==1){
	AddTimer("MachineActive", 0.01f, "MachineActive");
		}
}

void MachineActive(string &in asTimer)
{
	SetPlayerActive(false);
	CreateParticleSystemAtEntity("sparks", "sparks.ps", "Key_Machine_Spark", false);
	AddTimer("TimerSparkDes", 2.5f, "TimerSparkDes");
	StartPlayerLookAt("Key_Machine_Int",0.5f, 0.5f, "");
	PlaySoundAtEntity("", "machine_keymachine_run1.snt", "Key_Machine_Spark", 0.0, false);
}

void TimerSparkDes(string &in asTimer)
{
	DestroyParticleSystem("sparks");
	StopPlayerLookAt();
	SetPlayerActive(true);
	GiveItem("Key_BaseDoor", "Puzzle", "BasementKey", "inventory_key01.tga", 0);
	PlaySoundAtEntity("", "receive_key1.snt", "Player", 0, false);
	SetMessage("Messages", "GetBasementKey", 3.5);
	GiveSanityBoostSmall();
}

void EvenMindFuckScream_1(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "Ambient14.snt", "AreaCommotion1", 0, false);
	SetPlayerMoveSpeedMul(0.50f);
	AddTimer("TimerPlayerSpeedSpook_1", 7.0, "TimerPlayerSpeedSpook_1");
}

void TimerPlayerSpeedSpook_1(string &in asTimer)
{
	SetPlayerMoveSpeedMul(0.75f);
}

void EvenMindFuckKnock_2(string &in asParent, string &in asChild, int alState)
{
	
}

void UnlockStorage(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaDoorLocked_1", false);
	SetEntityActive("AreaDoor_1", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_key01_burn_1");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

void UnlockBasement(string &in asItem, string &in asEntity)
{
	SetEntityActive("Floor_B_Door_Locked_1", false);
	SetEntityActive("Floor_B_Door_9", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("Key_BaseDoor");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void EvenChangeMusic(string &in asParent, string &in asChild, int alState)
{
	PlayMusic("The Apartments Tension.ogg", true, 1.0, 1.0, 0, false);
}

void EvenDogScare_LightsOut_1(string &in asParent, string &in asChild, int alState)
{
	AddTimer("TimerLightsOut", 0.20f, "TimerLightsOut");
}

void TimerLightsOut(string &in asTimer)
{
	PlaySoundAtEntity("", "knack_door.snt", "AmbientSound_1_Fst_3", 0, false);
	RemoveEntityCollideCallback("Player", "AreaNotSafe");
	AddEntityCollideCallback("Player", "AreaNotSafe", "EvenNotsafe_1", false, 1);
	AddTimer("TimerLightsOutDoor", 3.0f, "TimerLightsOutDoor");
}

void TimerLightsOutDoor(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "knack_door2.snt", "AmbientSound_1_Fst_3", 0, false);
}

//////////////////////////////////////////////////////////

void UnlockThankYouRoom(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaDoor_42", false);
	SetEntityActive("AreaDoor_16", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("StrangeKey");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void Unlock306(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaDoor_En_Locked_1", false);
	SetEntityActive("AreaDoor_21", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_secret_mine_door_key_1");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void Door_Blob(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_27");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
	SetFogProperties(20, 30, 0.5, true);
}

void Door_BlobB(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_32");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
	SetFogProperties(3, 6, 1, true);
}

//////////////////////////////////////////////////////////

void Door_309(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_46");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

void Door_309_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_47");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void UnlockElevator1(string &in asEntity)
{
	SetEntityActive("AreaElevatorDoor_5", false);
	SetEntityActive("AreaElevatorDoor_1", true);
}

//////////////////////////////////////////////////////////

void SoundScaredFunc(string &in asEntity)
{
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
}

//////////////////////////////////////////////////////////

void Basement_Floor_1(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_19");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void Basement_Floor_1E(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_33");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void Basement_Floor_L(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_40");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void Basement_Floor_L2(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_39");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void PoorGasOnBlob(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaGasBlob", false);
	SetEntityActive("AreaLightBlob_1", true);
	PlaySoundAtEntity("PoorFuel", "interact_fuel_pour.snt", "Player", 0.0, false);
	RemoveItem("item_fueltank_item_1");
}

void LightBlobOnFire(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaLightBlob_1", false);
	PlaySoundAtEntity("PoorFuel", "use_lighter_01.snt", "Player", 0.0, false);
	RemoveItem("item_lighter_1");
	AddTimer("TimerFire", 0.02f, "TimerFire");
}

void TimerFire(string &in asTimer)
{
	CreateParticleSystemAtEntity("FireParticle_1", "particle_fire_lvl9.ps", "Partcle_Fire", false);
	PlaySoundAtEntity("FireBurning", "fire_burning_intro.snt", "Partcle_Fire", 0.5, false);
	AddTimer("TimerFireStop", 10.5f, "TimerFireStop");
	AddTimer("Timer	", 2.5f, "TimerKillBlob");
}

void TimerKillBlob(string &in asTimer)
{
	SetPropActiveAndFade("slime_pile_mental_2", false, 4.0);
	SetPropActiveAndFade("slime_egg_mental_1", false, 4.0);
	SetPropActiveAndFade("slime_egg_mental_2", false, 4.0);
	SetPropActiveAndFade("slime_anim_wall_mental_2", false, 4.0);
	SetPropActiveAndFade("slime_anim_wall_mental_1", false, 6.0);
	SetPropActiveAndFade("slime_3way_mental_1", false, 6.0);
	SetPropActiveAndFade("slime_6way_mental_1", false, 6.0);
	SetPropActiveAndFade("slime_pile_mental_7", false, 5.0);
	SetPropActiveAndFade("slime_pile_mental_8", false, 5.0);
	SetPropActiveAndFade("slime_pile_mental_11", false, 4.0);
	SetPropActiveAndFade("slime_pile_mental_12", false, 4.0);
	SetPropActiveAndFade("slime_pile_mental_3", false, 4.0);
	SetPropActiveAndFade("slime_pile_mental_5", false, 5.0);
	SetPropActiveAndFade("slime_egg_mental_3", false, 8.0);
	SetPropActiveAndFade("slime_pile_mental_4", false, 8.0);
	SetPropActiveAndFade("slime_pile_mental_6", false, 8.0);
	SetPropActiveAndFade("slime_pile_mental_10", false, 8.0);
	SetPropActiveAndFade("slime_pile_mental_13", false, 3.0);
	PlaySoundAtEntity("FireBurning", "fire_burning_intro.snt", "Partcle_Fire", 0.5, false);
	PlaySoundAtEntity("PainScream", "CHAR_monsterScream_01.snt", "SoundScream", 0.0, false);
	StartScreenShake(0.08, 9.5, 1.0, 3.0);
	FadeImageTrailTo(0.8, 0.5);
}

void TimerFireStop(string &in asTimer)
{
	DestroyParticleSystem("FireParticle_1");
	StopSound("FireBurning", 0.5);
	StopSound("Sound_Slime", 0.1);
	FadeImageTrailTo(0.0, 0.1);
}

//////////////////////////////////////////////////////////

void Unlock309(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaDoor_En_Locked", false);
	SetEntityActive("AreaDoor_18", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_key01_1");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
	GiveSanityBoostSmall();
}

//////////////////////////////////////////////////////////

void DogSpawn(string &in asEntity)
{
	AddTimer("TimerDogSpawn", 2.0f, "TimerDogSpawn");
	AddTimer("TimerLightExplode", 1.0f, "TimerLightExplode");
	AddEntityCollideCallback("Player", "AreaDogSoundSpookyRoom", "GutsCockroachSpook", true, 1);
	SetPlayerMoveSpeedMul(0.20f);
}

void TimerLightExplode(string &in asTimer)
{
	PlaySoundAtEntity("LightExplode", "Lightbulb_expload.snt", "AreaLightExplodeSound", 0.0, false);
	SetLightVisible("PointLight_125", false);
	SetLightVisible("SpotLight_68", false);
	SetLightVisible("SpotLight_68", false);
	SetLightVisible("PointLight_56", false);
	SetLightVisible("PointLight_327", false);
	SetLightVisible("PointLight_326", false);
	SetLightFlickerActive("PointLight_327", false);
	FadeLightTo("PointLight_327", 0, 0, 0, 1, 1, 0.01);
	AddTimer("TimerSpook1", 0.7f, "TimerSpook1");
}

void TimerSpook1(string &in asTimer)
{
	GiveSanityDamage(10, true);
}

void TimerDogSpawn(string &in asTimer)
{
	SetPropActiveAndFade("corpse_dog_2", false, 1.0);
	SetEntityActive("ExamineArea_6", false);
	SetEntityActive("blood_spatter03_1", true);
	PlaySoundAtEntity("VentOpen", "sh_door_open.snt", "AreaDoor_38", 0.0, false);
	SetPlayerMoveSpeedMul(0.75f);
	AddQuest("Get Out", "QstGetOut");
	AddNote("Diary3", "default_note");
}

void GutsCockroachSpook(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("cockroach_21", true);
	SetEntityActive("cockroach_22", true);
	SetEntityActive("cockroach_23", true);
	SetEntityActive("cockroach_24", true);
	SetEntityActive("cockroach_25", true);
	SetEntityActive("cockroach_26", true);
	SetEntityActive("cockroach_27", true);
	SetEntityActive("cockroach_28", true);
	SetEntityActive("cockroach_29", true);
	SetEntityActive("cockroach_30", true);
	SetEntityActive("cockroach_31", true);
	SetEntityActive("cockroach_32", true);
	SetEntityActive("cockroach_33", true);
	StartInsanityEvent("Bugs_Many");
	GiveSanityDamage(0, true);
	AddTimer("TimerMindFuck_3", 10.0f, "TimerMindFuck_3");
	
	SetEntityActive("spider_1", true);
	SetEntityActive("spider_2", true);
	SetEntityActive("spider_3", true);
	SetEntityActive("spider_4", true);
	SetEntityActive("spider_5", true);
	SetEntityActive("spider_6", true);
	SetEntityActive("spider_7", true);
	SetEntityActive("spider_8", true);
	SetEntityActive("spider_10", true);
}

void TimerMindFuck_3(string &in asTimer)
{
	SetPropActiveAndFade("cockroach_21", false, 1.0);
	SetPropActiveAndFade("cockroach_22", false, 1.0);
	SetPropActiveAndFade("cockroach_23", false, 1.0);
	SetPropActiveAndFade("cockroach_24", false, 1.0);
	SetPropActiveAndFade("cockroach_25", false, 1.0);
	SetPropActiveAndFade("cockroach_26", false, 1.0);
	SetPropActiveAndFade("cockroach_27", false, 1.0);
	SetPropActiveAndFade("cockroach_28", false, 1.0);
	SetPropActiveAndFade("cockroach_29", false, 1.0);
	SetPropActiveAndFade("cockroach_30", false, 1.0);
	SetPropActiveAndFade("cockroach_31", false, 1.0);
	SetPropActiveAndFade("cockroach_32", false, 1.0);
	SetPropActiveAndFade("cockroach_33", false, 1.0);
	StopCurrentInsanityEvent();
}

//////////////////////////////////////////////////////////

void UnlockLocker(string &in asItem, string &in asEntity)
{
	SetSwingDoorLocked("furniture_small_locker_12", false, false);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_key01_burn_3");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
	SetEntityActive("crowbar_2", true);
}

//////////////////////////////////////////////////////////

void UseBoltCutters1(string &in asItem, string &in asEntity)
{
	SetEntityActive("Floor_2_Door_7", false);
	SetEntityActive("boat_lock_stat_1", false);
	SetEntityActive("Floor_2_Door", true);
	PlaySoundAtEntity("", "break_metal_lock1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

void UseBoltCutters2(string &in asItem, string &in asEntity)
{
	SetEntityActive("Floor_2_Door_6", false);
	SetEntityActive("boat_lock_stat_2", false);
	SetEntityActive("Floor_2_Door_5", true);
	PlaySoundAtEntity("", "break_metal_lock1.snt", "Player", 0.0, false);
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void UnlockParkingLot(string &in asItem, string &in asEntity)
{
	SetEntityActive("Floor_B_Door_6", false);
	SetEntityActive("Floor_B_Door_3", true);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_key01_burn_2");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void MindFuck1(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("ScreamSound_1", "1.snt", "ScreamSound1", 0.0, false);
	SetPlayerMoveSpeedMul(0.50f);
	AddTimer("TimerPlayerSpeedSpook_2", 5.0, "TimerPlayerSpeedSpook_2");
}

void TimerPlayerSpeedSpook_2(string &in asTimer)
{
	SetPlayerMoveSpeedMul(0.75f);
}

//////////////////////////////////////////////////////////

void WindowScare1(string &in asEntity)
{
	AddTimer("TimerWindowScare1", 5.0f, "TimerWindowScare1");
}

void TimerWindowScare1(string &in asTimer)
{
	PlaySoundAtEntity("WindowScare_1", "fonm_3.snt", "ExamineArea_4", 0.0, false);
	GiveSanityDamage(0, true);
}

//////////////////////////////////////////////////////////

void ExamineBlob(string &in asEntity)
{
	SetMessage("Messages", "ExamineBlob", 4.5);
}

//////////////////////////////////////////////////////////

void EvenNotsafe_1(string &in asParent, string &in asChild, int alState)
{
	PlayMusic("The Apartments Tension.ogg", true, 1.0, 1, 0, false);
	AddEntityCollideCallback("Player", "AreaLobbyEnter", "EvenSafe", true, 1);
	SetFogProperties(3, 6, 1, true);
	AddEntityCollideCallback("Player", "AreaLobbyEnter", "EvenSafe_1", false, 1);
	SetInDarknessEffectsActive(true);
	RemoveTimer("TimerSanityRep");
	AddTimer("TimerAmbience_1", 60.0f, "TimerAmbience_1");
	AddTimer("TimerAmbience_2", 180.0f, "TimerAmbience_2");
	AddTimer("TimerCommotion", 300.0f, "TimerCommotion");
	SetSanityDrainDisabled(true);
}

void EvenSafe_1(string &in asParent, string &in asChild, int alState)
{
	StopMusic(2.5, 0);
	SetFogProperties(10, 25, 1, true);
	AddEntityCollideCallback("Player", "AreaNotSafe", "EvenNotsafe_1", false, 1);
}

//////////////////////////////////////////////////////////

void InspectMachine(string &in asEntity)
{
	SetMessage("Messages", "KeyMachineEx", 4.5);
}

//////////////////////////////////////////////////////////

void MindFuckBagsActive(string &in asParent, string &in asChild, int alState)
{
	AddEntityCollideCallback("Player", "AreaKnockMindFuckHallActive_2", "MindFuckBags", true, 1);
}

void MindFuckBags(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("TrashBagSound", "trash_bag_spook.snt", "TrashBackSound", 0.0, false);
}

//////////////////////////////////////////////////////////

void DogTease_1(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("nec_dog_1", true);
	AddTimer("TimerDogTease_1", 0.7f, "TimerDogTease_1");
	PlaySoundAtEntity("DogGrowl1", "doll_idle_1.snt", "nec_dog_1", 0.0, false);
}

void TimerDogTease_1(string &in asTimer)
{
	AddEnemyPatrolNode("nec_dog_1", "PathNodeArea_1", 0.01, "");
	AddEnemyPatrolNode("nec_dog_1", "PathNodeArea_2", 0.01, "");
	AddEnemyPatrolNode("nec_dog_1", "PathNodeArea_3", 0.01, "");
	AddEnemyPatrolNode("nec_dog_1", "PathNodeArea_4", 0.01, "");
}

void DogTease_2(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("nec_dog_1", false);
}

//////////////////////////////////////////////////////////

void Door_087B(string &in asEntity)
{
	FadeOut(0.0);
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	AddTimer("TimerTeleport087", 1.5f, "TimerTeleport087");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void TimerTeleport087(string &in asTimer)
{
	TeleportPlayer("PlayerStartArea_23");
}

//////////////////////////////////////////////////////////

void DoorElevatorPL(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_31");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void DoorElevatorPL_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_34");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void AreaBossFight(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_36");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	SetPlayerActive(false);
}

void AreaBossFight_B(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_41");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_door_open.snt", "Player", 0.0, false);
	SetPlayerActive(false);
}

//////////////////////////////////////////////////////////

void FuseKeySpawnActive_1(string &in asEntity)
{
	SetLocalVarInt("FuseKeySpawnActive_1", 1);
	
	
	if(GetLocalVarInt("FuseKeySpawnActive_1")==1 && GetLocalVarInt("FuseKeySpawnActive_2")==1){
	AddEntityCollideCallback("Player", "AreaElevatorSpook1", "ElevatorMindFuck", true, 1);
	AddTimer("KeyBossActive", 0.01f, "KeyBossActive");
	SetLightVisible("PointLight_25", true);
	AddNote("Diary4", "default_note");
	}
	SetEntityActive("crawler2_dead_1", false);
	SetEntityActive("crawler_1", true);
	AddEnemyPatrolNode("crawler_1", "PathNodeArea_5", 0.01, "");
	AddEnemyPatrolNode("crawler_1", "PathNodeArea_6", 0.01, "");
	AddEnemyPatrolNode("crawler_1", "PathNodeArea_7", 0.01, "");
	SetPlayerMoveSpeedMul(0.10f);
}

void CrawlerGone_1(string &in asParent, string &in asChild, int alState)
	{
		SetEntityActive("crawler_1", false);
		SetPlayerMoveSpeedMul(0.75f);
		PlaySoundAtEntity("", "sh_door_open.snt", "crawler_1", 0.0, false);
	}

void Dollgone1(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("crawler_1", false);
	SetPlayerMoveSpeedMul(0.75f);
}

void FuseKeySpawnActive_2(string &in asEntity)
{
	SetLocalVarInt("FuseKeySpawnActive_2", 1);
	
	AddEntityCollideCallback("Player", "AreaDogTease_1", "DogTease_1", true, 1);
	AddEntityCollideCallback("nec_dog_1", "AreaDogTease_2", "DogTease_2", true, 1);
	
	if(GetLocalVarInt("FuseKeySpawnActive_1")==1 && GetLocalVarInt("FuseKeySpawnActive_2")==1){
	AddEntityCollideCallback("Player", "AreaElevatorSpook1", "ElevatorMindFuck", true, 1);
	AddTimer("KeyBossActive", 0.01f, "KeyBossActive");
	SetLightVisible("PointLight_25", true);
	AddNote("Diary4", "default_note");
	}
}

void KeyBossActive(string &in asTimer)
{
	SetEntityActive("blood_spatter01_1", true);
	SetEntityActive("corpse_male_arm_1", true);
	SetEntityActive("item_key_bossfight", true);
}

//////////////////////////////////////////////////////////

void UnlockBossBattleKey(string &in asItem, string &in asEntity)
{
	SetEntityActive("AreaDoorLocked_7", true);
	SetEntityActive("AreaDoorLocked_8", false);
	PlaySoundAtEntity("", "key_unlock1.snt", "Player", 0.0, false);
	RemoveItem("item_key_bossfight");
	SetMessage("Doors", "DoorUnlocked1", 3.5);
}

//////////////////////////////////////////////////////////

void DogBoss_1(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("nec_dog_3", true);
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_17", 3.0, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_28", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_29", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_30", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_31", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_32", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_33", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_34", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_35", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_37", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_38", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_39", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_40", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_41", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_42", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_43", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_44", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_45", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_46", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_47", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_48", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_49", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_50", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_51", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_52", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_53", 3.0, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_54", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_55", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_56", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_57", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_58", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_59", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_60", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_61", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_62", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_63", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_64", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_65", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_66", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_67", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_68", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_69", 3.0, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_70", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_71", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_72", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_73", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_74", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_75", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_76", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_77", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_78", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_79", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_80", 0.01, "");
	PlayMusic("Dog Ambience.ogg", true, 1.0f, 0, 69, false);
	CheckPoint("Checkpoint_2", "AreaCheckpoint_Boss_Start", "ResetBoss", "", "");
	PlaySoundAtEntity("hb", "heart_beat.snt", "nec_dog_3", 0.0, false);
}

void ResetBoss(string &in asName, int alCount)
{
	ResetProp("tech_lever_1");
	ResetProp("tech_lever_2");
	ResetProp("tech_lever_3");
	
	SetEntityActive("emergency_light_red_1", true);
	SetEntityActive("emergency_light_green_1", false);
	SetEntityActive("AreaGeneratorActivate", false);
	SetEntityActive("AreaDollScream_1", false);
	SetEntityActive("AreaDollScream_2", false);
	SetEntityActive("AreaDollScream_3", false);
	
	SetLocalVarInt("BossLever_01", 0);
	SetLocalVarInt("BossLever_02", 0);
	SetLocalVarInt("BossLever_03", 0);
	
	AddEntityCollideCallback("Player", "AreaDogEncounter1", "DogBoss_1", true, 1);
	AddEntityCollideCallback("tech_lever_1", "AreaBossLever_1", "BossLever_1", true, 1);
	AddEntityCollideCallback("tech_lever_2", "AreaBossLever_2", "BossLever_2", true, 1);
	AddEntityCollideCallback("tech_lever_3", "AreaBossLever_3", "BossLever_3", true, 1);
	
	SetLeverStuckState("tech_lever_1", 0, true);
	SetLeverStuckState("tech_lever_2", 0, true);
	SetLeverStuckState("tech_lever_3", 0, true);
	
	FadeLightTo("PointLight_76", 1, 0, 0, 1, 1.5, 0.01);
	FadeLightTo("SpotLight_4", 1, 0, 0, 1, 9, 0.01);
	FadeLightTo("SpotLight_5", 1, 0, 0, 1, 9, 0.01);
	FadeLightTo("SpotLight_6", 1, 0, 0, 1, 9, 0.01);
	
	StopMusic(1, 69);
	
	SetSanityDrainDisabled(true);
}

void ElevatorMindFuck(string &in asParent, string &in asChild, int alState)
{
	TeleportPlayer("PlayerStartArea_42");
	AddTimer("TimerElevatorSpookTele", 2.5f, "TimerElevatorSpookTele");
}

void TimerElevatorSpookTele(string &in asTimer)
{
	TeleportPlayer("PlayerStartArea_2");
	GiveSanityDamage(0, true);
}

void CarLightsOffScare(string &in asParent, string &in asChild, int alState)
{
	SetEntityActive("car_fixed_lights_2", false);
	PlaySoundAtEntity("car_scare", "light_off_car.snt", "car_fixed_4", 0.0, false);
	StopSound("Sound_42", 0.01);
}

//////////////////////////////////////////////////////////

void BossLever_1(string &in asParent, string &in asChild, int alState)
{
	SetLocalVarInt("BossLever_01", 1);
	
	SetLeverStuckState("tech_lever_1", 1, true);
	
	AlertEnemyOfPlayerPresence("nec_dog_3");
	
	if(GetLocalVarInt("BossLever_01")==1 && GetLocalVarInt("BossLever_02")==1 && GetLocalVarInt("BossLever_03")==1){
		SetEntityActive("AreaGeneratorActivate", true);
		ShowEnemyPlayerPosition("nec_dog_6");
		PlayMusic("ChaseTheme1.ogg", true, 0.8, 0.5, 666, false);
		FadeLightTo("PointLight_76", 0, 1, 0, 1, 1.5, 0.01);
		FadeLightTo("SpotLight_4", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_5", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_6", 0, 1, 0, 1, 9, 0.01);
		SetEntityActive("emergency_light_red_1", false);
		SetEntityActive("emergency_light_green_1", true);
		SetEntityActive("nec_dog_3", false);
		SetEntityActive("nec_dog_6", true);
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_17", 3.0, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_28", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_29", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_30", 0.01, "");
	AddEnemyPatrolNode("nec_dog_3", "PathNodeArea_31", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_32", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_33", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_34", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_35", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_37", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_38", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_39", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_40", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_41", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_42", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_43", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_44", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_45", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_46", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_47", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_48", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_49", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_50", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_51", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_52", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_53", 3.0, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_54", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_55", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_56", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_57", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_58", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_59", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_60", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_61", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_62", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_63", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_64", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_65", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_66", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_67", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_68", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_69", 3.0, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_70", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_71", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_72", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_73", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_74", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_75", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_76", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_77", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_78", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_79", 0.01, "");
	AddEnemyPatrolNode("nec_dog_6", "PathNodeArea_80", 0.01, "");
		AddEntityCollideCallback("nec_dog_6", "AreaDollScream_1", "DollScreamScare1", false, 1);
		}
}

void BossLever_2(string &in asParent, string &in asChild, int alState)
{
	SetLocalVarInt("BossLever_02", 1);
	
	SetLeverStuckState("tech_lever_2", 1, true);
	
	AlertEnemyOfPlayerPresence("nec_dog_3");
	
	if(GetLocalVarInt("BossLever_01")==1 && GetLocalVarInt("BossLever_02")==1 && GetLocalVarInt("BossLever_03")==1){
		SetEntityActive("AreaGeneratorActivate", true);
		ShowEnemyPlayerPosition("nec_dog_4");
		PlayMusic("ChaseTheme1.ogg", true, 0.8, 0.5, 666, false);
		FadeLightTo("PointLight_76", 0, 1, 0, 1, 1.5, 0.01);
		FadeLightTo("SpotLight_4", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_5", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_6", 0, 1, 0, 1, 9, 0.01);
		SetEntityActive("emergency_light_red_1", false);
		SetEntityActive("emergency_light_green_1", true);
		SetEntityActive("nec_dog_3", false);
		SetEntityActive("nec_dog_4", true);
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_17", 3.0, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_28", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_29", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_30", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_31", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_32", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_33", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_34", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_35", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_37", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_38", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_39", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_40", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_41", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_42", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_43", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_44", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_45", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_46", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_47", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_48", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_49", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_50", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_51", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_52", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_53", 3.0, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_54", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_55", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_56", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_57", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_58", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_59", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_60", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_61", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_62", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_63", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_64", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_65", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_66", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_67", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_68", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_69", 3.0, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_70", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_71", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_72", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_73", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_74", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_75", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_76", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_77", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_78", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_79", 0.01, "");
	AddEnemyPatrolNode("nec_dog_4", "PathNodeArea_80", 0.01, "");
		AddEntityCollideCallback("nec_dog_4", "AreaDollScream_2", "DollScreamScare2", false, 1);
		}
}

void BossLever_3(string &in asParent, string &in asChild, int alState)
{
	SetLocalVarInt("BossLever_03", 1);
	
	SetLeverStuckState("tech_lever_3", 1, true);
	
	AlertEnemyOfPlayerPresence("nec_dog_3");
	
	if(GetLocalVarInt("BossLever_01")==1 && GetLocalVarInt("BossLever_02")==1 && GetLocalVarInt("BossLever_03")==1){
		SetEntityActive("AreaGeneratorActivate", true);
		ShowEnemyPlayerPosition("nec_dog_5");
		PlayMusic("ChaseTheme1.ogg", true, 0.8, 0.5, 666, false);
		FadeLightTo("PointLight_76", 0, 1, 0, 1, 1.5, 0.01);
		FadeLightTo("SpotLight_4", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_5", 0, 1, 0, 1, 9, 0.01);
		FadeLightTo("SpotLight_6", 0, 1, 0, 1, 9, 0.01);
		SetEntityActive("emergency_light_red_1", false);
		SetEntityActive("emergency_light_green_1", true);
		SetEntityActive("nec_dog_3", false);
		SetEntityActive("nec_dog_5", true);
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_17", 3.0, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_28", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_29", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_30", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_31", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_32", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_33", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_34", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_35", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_37", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_38", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_39", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_40", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_41", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_42", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_43", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_44", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_45", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_46", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_47", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_48", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_49", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_50", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_51", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_52", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_53", 3.0, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_54", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_55", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_56", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_57", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_58", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_59", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_60", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_61", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_62", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_63", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_64", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_65", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_66", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_67", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_68", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_69", 3.0, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_70", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_71", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_72", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_73", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_74", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_75", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_76", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_77", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_78", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_79", 0.01, "");
	AddEnemyPatrolNode("nec_dog_5", "PathNodeArea_80", 0.01, "");
		AddEntityCollideCallback("nec_dog_5", "AreaDollScream_3", "DollScreamScare3", false, 1);
		}
}

void DollScreamScare1(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "psyksjuk.snt", "nec_dog_6", 0.0, false);
}

void DollScreamScare2(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "psyksjuk.snt", "nec_dog_4", 0.0, false);
}

void DollScreamScare3(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "psyksjuk.snt", "nec_dog_5", 0.0, false);
}

void ActivateGenerator(string &in asEntity)
{
	PlaySoundAtEntity("", "12_whip.snt", "Player", 0.0, false);
	PlaySoundAtEntity("", "exp05_generator_start.snt", "Player", 0.0, false);
	SetPlayerActive(false);
	StartPlayerLookAt("AreaGeneratorActivate",0.5f, 0.5f, "");
	AddTimer("TimerECrawlerDead", 4.0f, "TimerECrawlerDead");
	StartScreenShake(0.04, 1.0, 0.5, 10.0);
	ClearEnemyPatrolNodes("nec_dog_3");
	ClearEnemyPatrolNodes("nec_dog_4");
	ClearEnemyPatrolNodes("nec_dog_6");
	ClearEnemyPatrolNodes("nec_dog_5");
	SetLightVisible("PointLight_10", true);
	SetLightVisible("PointLight_69", true);
	SetLightVisible("PointLight_70", true);
	SetLightVisible("PointLight_71", true);
	PlaySoundAtEntity("ElectricShock", "05_electric_failure.snt", "Player", 0.0, false);
	SetEntityActive("nec_dog_3", false);
	SetEntityActive("nec_dog_4", false);
	SetEntityActive("nec_dog_6", false);
	SetEntityActive("nec_dog_5", false);
	SetEntityActive("crawler_2", true);
	SetLanternDisabled(true);
	FadeImageTrailTo(0.1, 1.0);
	FadeLightTo("PointLight_76", 0, 0, 0, 1, 1.5, 0.01);
	FadeLightTo("SpotLight_4", 0, 0, 0, 1, 9, 0.01);
	FadeLightTo("SpotLight_5", 0, 0, 0, 1, 9, 0.01);
	FadeLightTo("SpotLight_6", 0, 0, 0, 1, 9, 0.01);
	StopSound("hb", 0.01);
}

void TimerECrawlerDead(string &in asTimer)
{
	StartPlayerLookAt("crawler_2",3.0,4.0, "");
	AddTimer("TimerGeneratorExplode", 1.5f, "TimerGeneratorExplode");
	StartScreenShake(0.04, 1.0, 0.5, 10.0);
}

void TimerGeneratorExplode(string &in asTimer)
{
	StartPlayerLookAt("AreaGeneratorActivate",2.0, 3.0, "");
	AddTimer("TimerGeneratorExplode_1", 3.0f, "TimerGeneratorExplode_1");
	StartScreenShake(0.04, 1.0, 0.5, 10.0);
	PlaySoundAtEntity("", "Buildup1.snt", "Player", 0.0, false);
}

void TimerGeneratorExplode_1(string &in asTimer)
{
	StartPlayerLookAt("AreaGeneratorActivate",1.0,2.0, "");
	AddTimer("TimerGeneratorExplode_2", 8.0f, "TimerGeneratorExplode_2");
	AddTimer("TimeRocks", 1.50f, "TimeRocks");
	AddTimer("TimerPlayerImpact", 1.90f, "TimerPlayerImpact");
	AddTimer("TimerTeleportPlayer_1", 2.0f, "TimerTeleportPlayer_1");
	StartScreenShake(0.06, 1.0, 0.5, 10.0);
	FadeOut(0.2f);
	SetLightVisible("PointLight_10", false);
	SetLightVisible("PointLight_69", false);
	SetLightVisible("PointLight_70", false);
	SetLightVisible("PointLight_71", false);
	SetPlayerCrouching(true);
	StopSound("ElectricShock", 0.5);
	SetEntityActive("crawler_2", false);
	SetEntityActive("crawler2_dead_2", true);
	SetEntityActive("AreaCrawlerFuse", true);
	StopMusic(1, 666);
	FadePlayerFOVMulTo(2.5, 2.5);
	PlaySoundAtEntity("", "03_explosion1.snt", "Player", 0.0, false);
	CreateParticleSystemAtEntity("Explosion", "particle_dynamite_explosion.ps", "AreaExplosion", false);
	GivePlayerDamage(0, "BloodSplat", false,false);
	RemoveTimer("TimerExplosion");
	RemoveTimer("TimerBreath");
	RemoveItem("Flashlight_lantern_dkf_1");
	FadeImageTrailTo(1.0, 0.5);
	SetPlayerMoveSpeedMul(0.45);
	SetEntityActive("Floor_B_Door_23", false);
	SetEntityActive("Floor_B_Door_18", true);
	AddEntityCollideCallback("Player", "AreaInjured_1", "EvenInjured", false, 1);
	AddEntityCollideCallback("Player", "AreaInjured_2", "EvenInjured1", false, 1);
}

void TimerPlayerImpact(string &in asTimer)
{
	PlaySoundAtEntity("", "player_falldamage_med.snt", "Player", 0.0, false);
}

void TimeRocks(string &in asTimer)
{
	SetEntityActive("modern_mine_wall_broken_s_3", true);
	SetEntityActive("modern_mine_wall_broken_s_4", true);
	SetEntityActive("modern_mine_wall_broken_s_5", true);
	SetEntityActive("modern_mine_wall_broken_s_6", true);
	FadeImageTrailTo(0, 0.01);
	SetEntityActive("mine_paraffin_lamp_off_1", true);
	SetEntityActive("mine_paraffin_lamp_9", false);
}

void TimerTeleportPlayer_1(string &in asTimer)
{
	TeleportPlayer("PlayerStartArea_45");
	FadePlayerFOVMulTo(1, 2.5);
	SetEntityActive("tech_demo_gen02_1", false);
	SetEntityActive("tech_demo_gen02_2", true);
	SetEntityActive("emergency_light_green_1", false);
	SetEntityActive("emergency_light_green_2", true);
	SetEntityActive("modern_mine_wall_broken_s_1", true);
	SetEntityActive("modern_mine_wall_broken_s_2", true);
}

void TimerGeneratorExplode_2(string &in asTimer)
{
	StartPlayerLookAt("AreaExplodeLook_2",1.0, 2.0, "");
	AddTimer("TimerWakeBase", 0.5f, "TimerWakeBase");
	FadeIn(4.0f);
	SetPlayerCrouching(false);
	SetPlayerActive(true);
	PlayMusic("Peace.ogg", false, 0.6, 0.5, 0, false);
	PlaySoundAtEntity("", "water_gasp.snt", "Player", 0.0, false);
	SetMessage("Messages", "BrokeFlashlight", 3.5);
}

void TimerWakeBase(string &in asTimer)
{
	StopPlayerLookAt();
}

void ExamineCorpse(string &in asEntity)
{
	SetMessage("Messages", "ExamineCrawler", 2.5);
	SetEntityActive("AreaCrawlerFuse_1", true);
}

void PickupFuseLast(string &in asEntity)
{
	GiveItem("Fuse3", "Puzzle", "Fuse", "inventory_replacement_fuse.tga", 1);
	PlaySoundAtEntity("", "pick_generic.snt", "Player", 0, false);
	SetMessage("Messages", "Fuse", 3.5);
	SetEntityActive("AreaDoorLocked_9", true);
	SetEntityActive("AreaDoorLocked_5", false);
}

void DoorElevatorEnding_1(string &in asEntity)
{
	SetMessage("Messages", "ElevatorNoPower", 2.5);
}

void DoorL6(string &in asEntity)
{
	SetMessage("Messages", "DoorLocked6", 2.5);
}

//////////////////////////////////////////////////////////

void PlaceFuse_1(string &in asItem, string &in asEntity)
{
	SetLocalVarInt("PlaceFuse_01", 1);
	
	SetEntityActive("tech_fuse_1", true);
	PlaySoundAtEntity("", "lm_attach_fuse.snt", "Player", 0.0, false);
	RemoveItem("item_replacement_fuse_2");
	
	if(GetLocalVarInt("PlaceFuse_01")==1 && GetLocalVarInt("PlaceFuse_02")==1 && GetLocalVarInt("PlaceFuse_03")==1){
		SetEntityActive("DoorElevatorEnding", true);
		SetEntityActive("DoorElevatorEnding_1", false);
		CompleteQuest("Activate Elevator", "QstElevator");
		}
}

void PlaceFuse_2(string &in asItem, string &in asEntity)
{
	SetLocalVarInt("PlaceFuse_02", 1);
	
	SetEntityActive("tech_fuse_2", true);
	PlaySoundAtEntity("", "lm_attach_fuse.snt", "Player", 0.0, false);
	RemoveItem("item_replacement_fuse_1");
	
	if(GetLocalVarInt("PlaceFuse_01")==1 && GetLocalVarInt("PlaceFuse_02")==1 && GetLocalVarInt("PlaceFuse_03")==1){
		SetEntityActive("DoorElevatorEnding", true);
		SetEntityActive("DoorElevatorEnding_1", false);
		CompleteQuest("Activate Elevator", "QstElevator");
		}
}

void PlaceFuse_3(string &in asItem, string &in asEntity)
{
	SetLocalVarInt("PlaceFuse_03", 1);
	
	SetEntityActive("tech_fuse_3", true);
	PlaySoundAtEntity("", "lm_attach_fuse.snt", "Player", 0.0, false);
	RemoveItem("Fuse3");
	
	if(GetLocalVarInt("PlaceFuse_01")==1 && GetLocalVarInt("PlaceFuse_02")==1 && GetLocalVarInt("PlaceFuse_03")==1){
		SetEntityActive("DoorElevatorEnding", true);
		SetEntityActive("DoorElevatorEnding_1", false);
		CompleteQuest("Activate Elevator", "QstElevator");
		}
}

void DoorElevatorC1End(string &in asEntity)
{
	FadeOut(0.0);
	TeleportPlayer("PlayerStartArea_15");
	AddTimer("TimerFadeInDoor", 1.5f, "TimerFadeInDoor");
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 0.0, false);
	StopMusic(0.5, 0);
	StopMusic(0.5, 2);
}

void DoorL7(string &in asEntity)
{
	PlaySoundAtEntity("", "sh_el_do_01.snt", "Player", 1.0 / 2, false);
	ChangeMap("01_underground_mines.map", "PlayerStartArea_1", "", "");
}

//////////////////////////////////////////////////////////

void break_trigger(string &in asEntity, string &in Break)
{
	PlaySoundAtEntity("", "Suicide2.snt", "SuicideSounds", 0.0, false);
	StopSound("SuicideVic1", 0.01);
	RemoveTimer("TimerSuicideVictim");
	RemoveTimer("asTimer");
	AddTimer("TimerSuicideLight", 4.030f, "TimerSuicideLight");
	SetEntityActive("AreaSuicideInteract", false);
	
}

//////////////////////////////////////////////////////////

void ButtonEndChapter(string &in asEntity)
{
	PlaySoundAtEntity("", "Button.snt", "Player", 0.0, false);
	AddTimer("TimerElevatorEnding", 2.0f, "TimerElevatorEnding");
	SetEntityActive("AreaElevatorNoTurnBack", false);
	SetEntityActive("AreaButtonEnd", false);
	RemoveTimer("TimerExplosion");
}

void TimerElevatorEnding(string &in asTimer)
{
	PlaySoundAtEntity("", "Moving.snt", "Player", 0.0, false);
	StartScreenShake(0.01, 8.0, 0.5, 0.5);
	AddTimer("TimerElevatorEnding_1", 7.10f, "TimerElevatorEnding_1");
}

void TimerElevatorEnding_1(string &in asTimer)
{
	AddTimer("TimerElevatorEnding_2", 15.0f, "TimerElevatorEnding_2");
	StartScreenShake(0.02, 0.01, 0.5, 0.7);
	SetEntityActive("AreaElevatorNoTurnBack_1", true);
}

void BateseeBook(string &in asEntity)
{
	SetMessage("Messages", "Funnybook", 2.5);
}

void ExamineFuse(string &in asEntity)
{
	SetMessage("Messages", "Powerboxes2", 2.5);
}

//////////////////////////////////////////////////////////

void ShowHint_1(string &in asParent, string &in asChild, int alState)
{
	GiveHint ("Hint_1", "Hints", "HintLeftClick", 4.0);
	AddTimer("TimerHint_2", 5.0f, "TimerHint_2");
}

void TimerHint_2(string &in asTimer)
{
	GiveHint ("Hint_2", "Hints", "HintSave", 4.0);
	AddTimer("TimerHint_3", 5.0f, "TimerHint_3");
}

//////////////////////////////////////////////////////////

void SortOfSafe(string &in asParent, string &in asChild, int alState)
{
	AddEntityCollideCallback("Player", "AreaSortOfSafe_1", "SortOfNotSafe", false, 1);
	AddEntityCollideCallback("Player", "AreaSortOfSafe_2", "SortOfNotSafe", false, 1);
	PlayMusic("SortOfSafe.ogg", true, 3.0f, 1, 2, false);
	SetInsanitySetEnabled("Apartments", false);
	SetSanityDrainDisabled(true);
	SetInDarknessEffectsActive(false);
}

void SortOfNotSafe(string &in asParent, string &in asChild, int alState)
{
	StopMusic(2.5, 2);
	SetInsanitySetEnabled("Apartments", true);
	SetSanityDrainDisabled(true);
	SetInDarknessEffectsActive(true);
}

//////////////////////////////////////////////////////////

void SpookySound(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "7.snt", "AreaDollSound", 0.0, false);
}

//////////////////////////////////////////////////////////

void Dog_Floor_L1(string &in asEntity)
{
	SetMessage("Doors", "DoorLockedBossFight", 2.5);
}

//////////////////////////////////////////////////////////

void EvenNoWay(string &in asItem, string &in asEntity)
{
	SetMessage("Messages", "NoWayAmI", 3.5);
}

//////////////////////////////////////////////////////////

void TimerWindowHowl(string &in asTimer)
{
	PlaySoundAtEntity("", "windowhowls.snt", "WindowHowlSounds", 0.0, false);
	PlaySoundAtEntity("", "windowhowls.snt", "WindowHowlSounds_1", 0.0, false);
	AddTimer("TimerWindowHowl", 300.0f, "TimerWindowHowl");
}

//////////////////////////////////////////////////////////

void DoorScreamEven(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "doorscream.snt", "AreaDoor_49", 0.0, false);
}

//////////////////////////////////////////////////////////

void EvenSoundFonm(string &in asParent, string &in asChild, int alState)
{
	PlaySoundAtEntity("", "fonm_6.snt", "AmbientSoundFonm", 0.0, false);
}

//////////////////////////////////////////////////////////

void EvenChangeObj_1(string &in asParent, string &in asChild, int alState)
{
	CompleteQuest("Find Crew", "Ch1Pt1Qst");
}

//////////////////////////////////////////////////////////

void EvenChangeObj_2(string &in asParent, string &in asChild, int alState)
{
	CompleteQuest("Get Out", "QstGetOut");
	AddQuest("Activate Elevator", "QstElevator");
}